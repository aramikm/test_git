name: Release Java
run-name: Cut Release ${{github.event.inputs.release-version || github.ref_name}}
concurrency:
  group: ${{github.workflow}}-${{github.ref}}
  cancel-in-progress: true
on:
  push:
    # tags:
    #   - "v[0-9]+.[0-9]+.[0-9]+java" # ex. v1.0.0+java
    #   - "v0.0.1-rc[0-9]+java" # used for testing only
    # branches:
    #   - "test_release_java_[0-9]+" # used for testing only

  workflow_dispatch:
    inputs:
      release-version:
        description: "Release version (v#.#.#[-rc#])+java"
        required: true

env:
  NEW_RELEASE_TAG_FROM_UI: ${{github.event.inputs.release-version}}
  NEW_RELEASE_TAG: ${{github.event.inputs.release-version || github.ref_name}}
  LATEST_FULL_RELEASE_TAG: _LATEST-FULL-RELEASE
  TEST_RUN: ${{contains(github.event.inputs.release-version || github.ref_name, '-rc')}}

jobs:
    build-artifacts:
    name: test
    runs-on: windows-latest
    steps:
      - name: setup files
        run: |
          touch test1.sources.jar
          touch test1.jar
          ls
      
      - name: Rename Packages
        run: |
          for file in *.jar; do mv "$file" "${file/.jar/-${{matrix.os}}.jar}"; done
          ls
